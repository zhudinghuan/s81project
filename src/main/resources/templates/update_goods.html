<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>修改商品信息</title>
<link rel="icon" href="favicon.ico" type="image/ico">
<meta name="keywords" content="首页 - s81shop">
<meta name="description" content="LightYear是一个基于Bootstrap v3.3.7的后台管理系统的HTML模板。">
<meta name="author" content="朱定欢">
<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/materialdesignicons.min.css" rel="stylesheet">
<link href="css/style.min.css" rel="stylesheet">
</head>
<script language="JavaScript" src="js/jquery.min.js"></script>
<!--<script language="JavaScript" src="js/main.min.js"></script>-->

<link href="js/jconfirm/jquery-confirm.min.css" rel="stylesheet" media="screen">
<script src="./js/jconfirm/jquery-confirm.min.js" type="text/javascript"></script>


<body>
<div class="lyear-layout-web">
  <div class="lyear-layout-container">
    <!--左侧导航-->
    <aside class="lyear-layout-sidebar">
       
      <!-- logo -->
      <div id="logo" class="sidebar-header">
        <a href="shouye.html"><img src="images/logo-sidebar.png" title="LightYear" alt="LightYear" /></a>
      </div>
      <div class="lyear-layout-sidebar-scroll">

        <nav class="sidebar-main">
          <ul class="nav nav-drawer">
            <li class="nav-item active"> <a href="/shouye"><i class="mdi mdi-home"></i> 后台首页</a> </li>
            <li class="nav-item nav-item-has-subnav">
              <a href="javascript:void(0)"><i class="mdi mdi-palette"></i>商品管理</a>
              <ul class="nav nav-subnav">
                <li> <a href="turnaddgoods">新增商品</a> </li>
                <li> <a href="selectgoods">修改商品信息</a> </li>
              </ul>
            </li>
            <li class="nav-item nav-item-has-subnav">
              <a href="javascript:void(0)"><i class="mdi mdi-format-align-justify"></i> 品牌管理 </a>
              <ul class="nav nav-subnav">
                <li> <a href="/turnaddbrand">新增品牌</a> </li>
                <li> <a href="/turnbrandinfo">所有品牌</a> </li>

              </ul>
            </li>
            <li class="nav-item nav-item-has-subnav">
              <a href="javascript:void(0)"><i class="mdi mdi-file-outline"></i> 管理员</a>
              <ul class="nav nav-subnav">
                <li> <a href="lyear_pages_doc.html">新增管理员</a> </li>
                <li> <a href="lyear_pages_gallery.html">删除管理员</a> </li>
              </ul>
            </li>
          </ul>
        </nav>
        
        <div class="sidebar-footer">
          <p class="copyright">Copyright &copy; 2020. <a target="_blank" href="http://lyear.itshubao.com">zhudinghuan</a> All rights reserved.</p>
        </div>
      </div>
      
    </aside>
    <!--End 左侧导航-->

    <!--头部信息-->
    <header class="lyear-layout-header">

      <nav class="navbar navbar-default">
        <div class="topbar">

          <div class="topbar-left">
            <div class="lyear-aside-toggler">
              <span class="lyear-toggler-bar"></span>
              <span class="lyear-toggler-bar"></span>
              <span class="lyear-toggler-bar"></span>
            </div>
            <span class="navbar-page-title"> 查询商品信息 </span>
          </div>

          <ul class="topbar-right">
            <li class="dropdown dropdown-profile">
              <a href="javascript:void(0)" data-toggle="dropdown">
                <img class="img-avatar img-avatar-48 m-r-10" src="userimg/${img}" alt="${username}" />
                <span>${username} <span class="caret"></span></span>
              </a>
              <ul class="dropdown-menu dropdown-menu-right">
                <li> <a href="select"><i class="mdi mdi-account"></i> 个人信息</a> </li>
                <li> <a href="selectoldpwd"><i class="mdi mdi-lock-outline"></i> 修改密码</a> </li>
                <!--                <li> <a href="javascript:void(0)"><i class="mdi mdi-delete"></i> 清空缓存</a></li>-->
                <li class="divider"></li>
                <li> <a href="index.html"><i class="mdi mdi-logout-variant"></i> 退出登录</a> </li>
              </ul>
            </li>
            <!--切换主题配色-->
            <li class="dropdown dropdown-skin">
              <span data-toggle="dropdown" class="icon-palette"><i class="mdi mdi-palette"></i></span>
              <ul class="dropdown-menu dropdown-menu-right" data-stopPropagation="true">
                <li class="drop-title"><p>主题</p></li>
                <li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="site_theme" value="default" id="site_theme_1" checked>
                    <label for="site_theme_1"></label>
                  </span>
                  <span>
                    <input type="radio" name="site_theme" value="dark" id="site_theme_2">
                    <label for="site_theme_2"></label>
                  </span>
                  <span>
                    <input type="radio" name="site_theme" value="translucent" id="site_theme_3">
                    <label for="site_theme_3"></label>
                  </span>
                </li>
                <li class="drop-title"><p>LOGO</p></li>
                <li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="logo_bg" value="default" id="logo_bg_1" checked>
                    <label for="logo_bg_1"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_2" id="logo_bg_2">
                    <label for="logo_bg_2"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_3" id="logo_bg_3">
                    <label for="logo_bg_3"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_4" id="logo_bg_4">
                    <label for="logo_bg_4"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_5" id="logo_bg_5">
                    <label for="logo_bg_5"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_6" id="logo_bg_6">
                    <label for="logo_bg_6"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_7" id="logo_bg_7">
                    <label for="logo_bg_7"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_8" id="logo_bg_8">
                    <label for="logo_bg_8"></label>
                  </span>
                </li>
                <li class="drop-title"><p>头部</p></li>
                <li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="header_bg" value="default" id="header_bg_1" checked>
                    <label for="header_bg_1"></label>                      
                  </span>
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_2" id="header_bg_2">
                    <label for="header_bg_2"></label>                      
                  </span>
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_3" id="header_bg_3">
                    <label for="header_bg_3"></label>
                  </span>
                  <span>
                    <input type="radio" name="header_bg" value="color_4" id="header_bg_4">
                    <label for="header_bg_4"></label>                      
                  </span>
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_5" id="header_bg_5">
                    <label for="header_bg_5"></label>                      
                  </span>
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_6" id="header_bg_6">
                    <label for="header_bg_6"></label>                      
                  </span>
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_7" id="header_bg_7">
                    <label for="header_bg_7"></label>
                  </span>
                  <span>
                    <input type="radio" name="header_bg" value="color_8" id="header_bg_8">
                    <label for="header_bg_8"></label>
                  </span>
                </li>
                <li class="drop-title"><p>侧边栏</p></li>
                <li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="sidebar_bg" value="default" id="sidebar_bg_1" checked>
                    <label for="sidebar_bg_1"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_2" id="sidebar_bg_2">
                    <label for="sidebar_bg_2"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_3" id="sidebar_bg_3">
                    <label for="sidebar_bg_3"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_4" id="sidebar_bg_4">
                    <label for="sidebar_bg_4"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_5" id="sidebar_bg_5">
                    <label for="sidebar_bg_5"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_6" id="sidebar_bg_6">
                    <label for="sidebar_bg_6"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_7" id="sidebar_bg_7">
                    <label for="sidebar_bg_7"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_8" id="sidebar_bg_8">
                    <label for="sidebar_bg_8"></label>
                  </span>
                </li>
              </ul>
            </li>
            <!--切换主题配色-->
          </ul>

        </div>
      </nav>

    </header>
    <!--End 头部信息-->
    
    <!--页面主要内容-->
    <main class="lyear-layout-content">
      
      <div class="container-fluid">
        
        <div class="row">
          <div class="col-lg-12">
            <div class="card">
              <div class="card-toolbar clearfix">
                <form class="pull-right search-bar" method="get" action="#!" role="form">
                  <div class="input-group" style="margin-left: -200px">
                    <div class="input-group-btn">
                      <input type="hidden" name="search_field" id="search-field" value="title">
                      <button class="btn btn-default dropdown-toggle" id="search-btn" data-toggle="dropdown" type="button" aria-haspopup="true" aria-expanded="false">
                      名称 <span class="caret"></span>
                      </button>
                      <ul class="dropdown-menu">
                        <li> <a tabindex="-1" href="javascript:void(0)" data-field="title">编号</a> </li>
                        <li> <a tabindex="-1" href="javascript:void(0)" data-field="cat_name">名称</a> </li>
                      </ul>
                    </div>
                    <input type="text" class="form-control" id="search_text" value="" name="keyword" placeholder="请输入名称" style="width: 180px">
                    <input type="button" onclick="search()" class="form-control" value="搜索"  style="width: 80px;margin-left: 50px;background: #2ba99d;color: black" >

                  </div>
                </form>
                <div class="toolbar-btn-action">

                  <a class="btn btn-success m-r-5" href="javascript:ExToExcel() "><i class="mdi mdi-check"></i> 导出文件</a>
                </div>
              </div>
              <div class="card-body">
                
                <div class="table-responsive" id="mydiv">
                  <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th>
                          <label class="lyear-checkbox checkbox-primary">
                            <input type="checkbox" id="check-all"><span></span>
                          </label>
                        </th>
                        <th>商品编号</th>
                        <th>缩略图</th>
                        <th>商品名称</th>
                        <th>商品描述</th>
                        <th>单价</th>

                        <th>商品销量</th>
                        <th>商品品牌</th>
                        <th>状态</th>
                        <th>操作</th>
                      </tr>
                    </thead>
                    <tbody id="tbody1">
                    <#if list??>
                    <#list list as goods>
                      <tr>
                        <td>
                          <label class="lyear-checkbox checkbox-primary">
                            <input type="checkbox" name="ids[]" value="1"><span></span>
                          </label>
                        </td>
                        <td>${goods.getGoods_id()}</td>
                        <td><img src="goodsimg/${goods.getGoods_img()}" style="width: 80px;height: 70px"> </td>
                        <td>${goods.goods_name}</td>
                        <td>${goods.goods_discrible}</td>
                        <td>${goods.goods_price}</td>
                        <td>${goods.goods_sell}</td>
                        <td >${goods.goods_brand}</td>
                        <td  ><span id="${goods.getGoods_id()}" style="display: block;float: left;padding: 2px 5px;text-decoration: none;background: #33cabb;color: #fff;padding: 10px 10px;">${goods.state}</span> </td>
                        <td>
                          <div class="btn-group">
                            <a class="btn btn-xs btn-default" href="/turnupdategoods?goodsid=${goods.getGoods_id()}" title="编辑" data-toggle="tooltip"><i class="mdi mdi-pencil"></i></a>
                            <a class="btn btn-xs btn-default" href="javascritp: void(0)" title="上下架" onclick="undercarriage('${goods.getGoods_id()}')" data-toggle="tooltip" ><i class="mdi mdi-eye"></i></a>
                            <a class="btn btn-xs btn-default" href="/deletegoods?goodsid=${goods.getGoods_id()}" title="删除" data-toggle="tooltip"><i class="mdi mdi-window-close"></i></a>
                          </div>
                        </td>
                      </tr>
                    </#list>
                    <#else>
                    <tr>
                      <td colspan="9" style="text-align: center">查无数据！</td>
                    </tr>
                    </#if>
                    </tbody>
                  </table>
                </div>
                <ul class="pagination">
                  <li ><a href="/selectpage2?page=${PrePage}&size=5" >«</a></li>
                  <li><a href="/selectpage2?page=1&size=5" >1</a></li>
<!--                  <li class="active"><span>2</span></li>-->
                  <li><a href="/selectpage2?page=2&size=5" >2</a></li>
                  <li><a href="/selectpage2?page=3&size=5">3</a></li>
                  <li><a href="/selectpage2?page=4&size=5">4</a></li>
                  <li><a href="/selectpage2?page=5&size=5">5</a></li>
                  <li><a href="/selectpage2?page=6&size=5">6</a></li>
                  <li><a href="/selectpage2?page=7&size=5">7</a></li>
                  <li><a href="/selectpage2?page=8&size=5">8</a></li>
                  <li class="disabled"><span>...</span></li>
                  <li><a href="#!">14452</a></li>
                  <li><a href="#!">14453</a></li>
                  <li><a href="#!">»</a></li>
                </ul>
       
              </div>
            </div>
          </div>
          
        </div>
        
      </div>
      
    </main>
    <!--End 页面主要内容-->
  </div>
</div>

<!--<script type="text/javascript" src="js/jquery.min.js"></script>-->
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/perfect-scrollbar.min.js"></script>
<!--<script type="text/javascript" src="js/main.min.js"></script>-->
<script type="text/javascript">
  function ExToExcel() {

    var search_btn=document.getElementById("search-btn");
    var search_text1=document.getElementById("search_text").value.trim();
    var text1=search_btn.innerText.trim();
    // alert("h");
      $.confirm({

        title: '导出Excel',

        buttons: {

          confirm: {

            text: '导出',

            action: function () {
              if (text1=="名称") {
                // alert("hello");
                location.href = "/ExcelOut?text1="+search_text1+"&tag=0";//tag=0时传名称
              }
              else {
                location.href = "/ExcelOut?text1="+search_text1+"&tag=1";//tag=1时传编号

              }
            }

          },
          cancel: {
            text: '取消',
          }
        }

      });
  }
    // if (text1=="编号"){
    // if(confirm("确认下架吗？")){
    //
    //   location.href = "/ExcelOut?text1="+search_text1;
    // }}
    //
    // }
</script>
<script>
  // function dispear() {
  //   $('#tbody1').html("");
  // }
  function undercarriage(id) {
    var state1=document.getElementById(id).innerText.trim();

    if (state1=="在售"){
    if(confirm("确认下架吗？")){
      let request1=new XMLHttpRequest();
      request1.open("get","statetoundercarriage?goods_id="+id);
      request1.send(null);
      request1.onreadystatechange=function()
      {
        if (request1.readyState==4 && request1.status==200)
        {

          document.getElementById(id).innerText="下架";
        }
      }
    }
    else{
    }}
    else {
      if(confirm("确认上架吗？")){
        let request1=new XMLHttpRequest();
        request1.open("get","statetosell?goods_id="+id);
        request1.send(null);
        request1.onreadystatechange=function()
        {
          if (request1.readyState==4 && request1.status==200)
          {
            document.getElementById(id).innerText="在售";
          }
        }
    }
  }
  }
</script>
<script>
  function search() {
    var search_btn=document.getElementById("search-btn");
    var search_text1=document.getElementById("search_text").value.trim();
    var text1=search_btn.innerText.trim();

    // var text2=search_text1.innerText.trim();;
    if (text1=="编号")
    {

      let request1=new XMLHttpRequest();
      request1.onreadystatechange=function()
      {
        if (request1.readyState==4 && request1.status==200)
        {
        //  document.getElementById("")
        //  document.getElementById("myDiv").innerHTML=request.responseText;
          $('#tbody1').html("");
          var arr =request1.responseText;
          var a  = JSON.parse(arr);
        //  var a = arr;
       //   document.getElementById("mydiv").innerHTML= a[0];
          if (a.length!=0) {

            for(var i=0;i < a.length ; i++){
            var str='';
            var setgoodsid=a[i].goods_id;
            var setgoodsname=a[i].goods_name;
            var setgoodsprice=a[i].goods_price;
            var setgoodssell=a[i].goods_sell;
            var setgoodsbrand=a[i].goods_brand;
            var setgoodsimg=a[i].goods_img;
            var setstate=a[i].state;
            var setgoodsdiscrible=a[i].goods_discrible;
            str=str+                    "                      <tr>" +
                    "                        <td>" +
                    "                          <label class='lyear-checkbox checkbox-primary'>" +
                    "                            <input type='checkbox' name='ids[]' value='1'><span></span>" +
                    "                          </label>" +
                    "                        </td>" +
                    "                        <td>"+setgoodsid+"</td>" +
                    "                        <td><img src='goodsimg/"+setgoodsimg+"' style=\"width: 80px;height: 70px\"> </td>\n" +
                    "                        <td>"+setgoodsname+"</td>" +
                    "                        <td>"+setgoodsdiscrible+"</td>" +
                    "                        <td>"+setgoodsprice+"</td>" +

                    "                        <td>"+setgoodssell+"</td>" +
                    "                        <td>"+setgoodsbrand+"</td>" +
                    "                        <td><span id='"+setgoodsid+"' style='display: block;float: left;padding: 2px 5px;text-decoration: none;background: #33cabb;color: #fff;padding: 10px 10px;'>"+setstate+"</span></td>" +
                    "                        <td>" +
                    "                          <div class='btn-group'>" +
                    "                            <a class='btn btn-xs btn-default' href='/turnupdategoods?goodsid="+setgoodsid+"' title='编辑' data-toggle='tooltip'><i class='mdi mdi-pencil'></i></a>" +
                    "                            <a class='btn btn-xs btn-default' href='javascritp: void(0)' title='上下架' onclick='undercarriage(\""+setgoodsid+"\")' data-toggle='tooltip\'><i class='mdi mdi-eye'></i></a>" +
                    "                            <a class='btn btn-xs btn-default' href='/deletegoods?goodsid="+setgoodsid+"' title='删除' data-toggle='tooltip'><i class='mdi mdi-window-close'></i></a>" +
                    "                          </div>" +
                    "                        </td>" +
                    "                      </tr>" +
                    "                    <tr>" +
                    "                    </tr>"

          }
          $('#tbody1').html(str);
          }else {
            str="<tr>     <td colspan='9' style='text-align: center'>查无数据！</td>      </tr>"
            $('#tbody1').html(str);
          }
        }
      }
      request1.open("get","selectgoodsbyid?text2="+search_text1);
      request1.send(null  );

    }else {
      let request1=new XMLHttpRequest();
      request1.onreadystatechange=function()
      {
        if (request1.readyState==4 && request1.status==200)
        {
          //  document.getElementById("")
          //  document.getElementById("myDiv").innerHTML=request.responseText;
          $('#tbody1').html("");
          var arr =request1.responseText;
          var a  = JSON.parse(arr);
          var str='';
          //  var a = arr;
          //   document.getElementById("mydiv").innerHTML= a[0];
          if (a.length!=0) {
            for (var i = 0; i < a.length; i++) {
              var setgoodsid = a[i].goods_id;
              var setgoodsname = a[i].goods_name;
              var setgoodsprice = a[i].goods_price;
              var setgoodssell = a[i].goods_sell;
              var setgoodsbrand = a[i].goods_brand;
              var setgoodsimg = a[i].goods_img;
              var setstate=a[i].state;

              var setgoodsdiscrible = a[i].goods_discrible;

              str = str + "                      <tr>" +
                      "                        <td>" +
                      "                          <label class='lyear-checkbox checkbox-primary'>" +
                      "                            <input type='checkbox' name='ids[]' value='1'><span></span>" +
                      "                          </label>" +
                      "                        </td>" +
                      "                        <td>" + setgoodsid + "</td>" +
                      "                        <td><img src='goodsimg/" + setgoodsimg + "' style=\"width: 80px;height: 70px\"> </td>\n" +
                      "                        <td>" + setgoodsname + "</td>" +
                      "                        <td>" + setgoodsdiscrible + "</td>" +
                      "                        <td>" + setgoodsprice + "</td>" +

                      "                        <td>" + setgoodssell + "</td>" +
                      "                        <td>" + setgoodsbrand + "</td>" +
                      "                        <td><span id='"+setgoodsid+"' style='display: block;float: left;padding: 2px 5px;text-decoration: none;background: #33cabb;color: #fff;padding: 10px 10px;'>"+setstate+"</span></td>" +
                      "                        <td>" +
                      "                          <div class='btn-group'>" +
                      "                            <a class='btn btn-xs btn-default' href='/turnupdategoods?goodsid="+setgoodsid+"' title='编辑' data-toggle='tooltip'><i class='mdi mdi-pencil'></i></a>" +
                      "                            <a class='btn btn-xs btn-default' href='javascritp: void(0)' title='上下架' onclick='undercarriage(\""+setgoodsid+"\")' data-toggle='tooltip\'><i class='mdi mdi-eye'></i></a>" +
                      "                            <a class='btn btn-xs btn-default' href='/deletegoods?goodsid="+setgoodsid+"' title='删除' data-toggle='tooltip'><  i class='mdi mdi-window-close'></i></a>" +
                      "                          </div>" +
                      "                        </td>" +
                      "                      </tr>" +
                      "                    <tr>" +
                      "                    </tr>";
              console.log(1);

            }
            $('#tbody1').html(str);
          }else {
            str="<tr>     <td colspan='9' style='text-align: center'>查无数据！</td>      </tr>"
            $('#tbody1').html(str);
          }
        }
      }
      request1.open("get","selectgoodsbyname?text2="+search_text1);
      request1.send(null);


    }
  }
</script>
<script type="text/javascript">
$(function(){

    $('.search-bar .dropdown-menu a').click(function() {
        var field = $(this).data('field') || '';
        $('#search-field').val(field);
        $('#search-btn').html($(this).text() + ' <span class="caret"></span>');
    });
});
</script>
</body>
</html>